<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bundle UI Harness</title>
    <!-- Load React from CDN to simulate the shared environment -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <style>
        body { font-family: system-ui; padding: 40px; background: #eee; }
        #root { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .status { margin-bottom: 20px; padding: 10px; border-radius: 4px; }
        .success { background: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }
    </style>
</head>
<body>
    <h1>UI Bundle Harness</h1>
    <div id="status" class="status">Loading bundle...</div>
    <div id="root"></div>

    <script type="module">
        // 1. Simulate the Platform Registry
        window.HA_CORE_PLUGINS = {};

        // 2. Load the compiled bundle
        // Note: In a real test we'd point to the /dist folder
        import('./dist/bundle-template-ui.es.js')
            .then(() => {
                document.getElementById('status').innerText = '✓ Bundle Loaded & Registered';
                document.getElementById('status').className = 'status success';

                // 3. Render the component from the registry
                const { ModuleInfo } = window.HA_CORE_PLUGINS.TemplateModule;
                const root = ReactDOM.createRoot(document.getElementById('root'));
                root.render(React.createElement(ModuleInfo, { bundleName: "Test Harness Environment" }));
            })
            .catch(err => {
                document.getElementById('status').innerText = '× Error loading bundle: ' + err.message;
                document.getElementById('status').style.background = '#fee2e2';
            });
    </script>
</body>
</html>
